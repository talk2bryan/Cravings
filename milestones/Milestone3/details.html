<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="./css/details.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.js"></script>
</head>
<body>
	<div id="header">
		<img id="logo">
	</div>
	
	<p id="breadcrumb"></p>
	
	<div id="info">
		<img id="rest-pic" alt="restaurant front">
		<h1 id="name"></h1>
		<p id="address"></p>
		<p id="site-phone"></p>
		<p id="tag-price"></p>
		<img id="rating">
	</div>


	<ul class="tab">
	  <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Menu')" id="defaultOpen">Menu</a></li>
	  <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Reviews')">Reviews</a></li>
	  <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Map')">Map</a></li>
	</ul>

	<div id="lower-third">
		<div id="Menu" class="tabcontent">
		  <p>This is where the menu goes.</p>
		</div>

		<div id="Reviews" class="tabcontent">
			<div id="review-list">
				<div id="user-review">
					<h4 class="review-name">Robert</h4>
					<img id="personal-review" src="./resources/images/4w.png">
					<p class="review">Love this place. Been to here many many times over the last 10 years. Very nice people - Maggie is the best. :)</p>
				</div>					
				<div id="user-review">
					<h4 class="review-name">Philip</h4>				
					<img id="personal-review" src="./resources/images/5w.png">
					<p class="review">I dined with a couple people in a very social, cozy atmosphere. I love the work of art that this company sells</p>
				</div>					
				<div id="user-review">
					<h4 class="review-name">Grant</h4>
					<img id="personal-review" src="./resources/images/3w.png">
					<p class="review">Coffee is ok. But always volcanic hot..with no cardboard cup wraps.</p>
				</div>
				<div id="user-review">
					<h4 class="review-name">Shayla</h4>
					<img id="personal-review" src="./resources/images/3w.png">
					<p class="review">Seem to alway get my husband steep tea wrong, my coffee is always perfect</p>
				</div>
				<div id="user-review">
					<h4 class="review-name">Style</h4>
					<img id="personal-review" src="./resources/images/4w.png">
					<p class="review">Clean and orders are done pretty fast. Doesn't get very busy.</p>
				</div>
				<div id="user-review">
					<h4 class="review-name">Kevin</h4>
					<img id="personal-review" src="./resources/images/1w.png">
					<p class="review">By far the worse location and it's not even busy. Waited for 10mins to be acknowledge and everyone starred at me and to top it off they attend to another customer who was waiting after me</p>
				</div>
			</div>
		</div>

		<div id="Map" class="tabcontent">
			<img id="map-picture" src="./resources/images/map.png">
			<div id="directions">
				<h3>Directions</h3>
				<p>Head southeast on Gillson St toward Dafoe Rd W</p>
				<p>Turn right onto Dafoe Rd W</p>
				<p>Turn left onto Maclean Crescent</p>
				<p>Turn right onto Freedman Crescent</p>
				<p>Turn left onto Kings Dr</p>
				<p>Turn right onto Silverstone Ave</p>
				<p>Turn right onto McMasters Rd</p>
			</div>
		</div>

	</div>	

	<script>
		$(document).ready(function(){
			var source = "https://raw.githubusercontent.com/talk2bryan/Cravings/rs/milestones/Milestone3/resources";

			$("#logo").attr("src", "./resources/images/logo.png");			
			
			// load restaurant
			$.ajax({
				type: "GET",
				url: source + "/data.csv",
				success: function (data) {
					var bufferString = Papa.unparse(Papa.parse(data).data);
					var arr = bufferString.split('\n'); 
					
					var restList = [];
					var headers = arr[0].split(',');
					for(var i = 1; i < arr.length; i++) {
						var data = arr[i].split(',');
						var obj = {};
						for(var j = 0; j < data.length; j++) {
							obj[headers[j].trim()] = data[j].trim();
						}
						restList.push(obj);
					}
			
					var id = 0;
			
					// @TODO: load breadcrumb
					$('<a>',{
						text: "Home",
						title: 'Home',
						href: 'http://' + restList[id].website,
					}).appendTo('#breadcrumb');
					$("#breadcrumb").append(" > ");
					$('<a>',{
						text: restList[id].tag,
						title: 'Cuisine',
						href: 'http://' + restList[id].website,
					}).appendTo('#breadcrumb');
					$("#breadcrumb").append(" > " + restList[id].name);
					
					document.title = restList[id].name + " | Cravings.com";
					
					// load display
					$("#rest-pic").attr('src', restList[id].picture);
					$("#name").text(restList[id].name);
					$("#address").text(restList[id].address + " " + restList[id].city + ", " + restList[id].province + ", " + restList[id].postalCode);
					$("#site-phone").text(restList[id].phone + "  |  ");
					$('<a>',{
						text: restList[id].website,
						title: 'Website',
						href: 'http://' + restList[id].website,
					}).appendTo('#site-phone');
						
					$("#tag-price").text(restList[id].tag + " - " + restList[id].price);
					$("#rating").attr("src", "./resources/images/" + restList[id].rating + ".png");
				}
			});
		});

		function openTab(evt, cityName) {
			var i, tabcontent, tablinks;
			tabcontent = document.getElementsByClassName("tabcontent");
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}
			tablinks = document.getElementsByClassName("tablinks");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className.replace(" active", "");
			}
			document.getElementById(cityName).style.display = "block";
			evt.currentTarget.className += " active";
		}

		// Get the element with id="defaultOpen" and click on it
		document.getElementById("defaultOpen").click();
	</script>
     
</body>
</html>